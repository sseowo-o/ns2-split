{"ast":null,"code":"var _jsxFileName = \"/Users/seowoo/Desktop/neo_test/wifiapp/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Route, Routes } from 'react-router-dom';\n/* import * as ROUTES from './routes'; */\n\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  // const [theme, settheme] = useState(neolabTheme.theme0_kr);\n  const isMobileDevice = true;\n  const location = useLocation();\n  console.log(location);\n  const {\n    userStore,\n    pageStore,\n    noteStore,\n    strokeStore,\n    audioStore\n  } = useStores();\n  const extra = userStore.userExtraData;\n  const [theme, setTheme] = useState(extra.theme); // 테마\n\n  const connectLiveRoom = async () => {\n    const ndp = NDP.instance;\n    const {\n      relay\n    } = ndp;\n    const rooms = await relay.getRoom();\n    if (rooms) {\n      var _rooms$resultElements;\n      const existed = rooms === null || rooms === void 0 ? void 0 : (_rooms$resultElements = rooms.resultElements) === null || _rooms$resultElements === void 0 ? void 0 : _rooms$resultElements.filter(e => e.ownerId === userStore.userData.id);\n      if (existed.length) {\n        relay.setRoom(existed[0]);\n      } else {\n        const room = await relay.createRoom();\n        if (room.entranceUrl) {\n          relay.setRoom(room);\n        } else {\n          console.error('Create Room Failed. Please check the server status.');\n          return;\n        }\n      }\n      await relay.connectRoom();\n      await relay.relayWS.join();\n      NDP.instance.relay.relayWS.on('UPLOAD_END', listenUploadEnd);\n    }\n  };\n  useEffect(() => {\n    NDPSyncController.getInstance();\n    PenManager.getInstance();\n    DatabaseController.getInstance();\n\n    // const ti = getThumbManager(); //여기서 init 해주지 않으면 ready가 pending이어서 진행되지 않음\n  }, []);\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [location]);\n  useEffect(() => {\n    async function getUserStrokes() {\n      // const asyncIterableStroke = NDP.instance.inkStore.getStrokeByStrokeIter(0);\n      // for await (const pages of asyncIterableStroke) {\n      //   NDPSyncController.instance.updateInkStoreage(pages);\n      // }\n    }\n    async function getNoteList() {\n      await noteStore.loadLocalNoteList();\n      await pageStore.loadLocalPages();\n      strokeStore.setStrokeLoading(LoadingStateEnum.SUCCESS);\n    }\n    if (userStore.userData) {\n      getNoteList();\n      getUserStrokes();\n      connectLiveRoom();\n      audioStore.getRecordedPageList();\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userStore.userData]);\n\n  // 사용자 테마 세팅\n  useEffect(() => {\n    if (userStore.userExtraData) {\n      const {\n        theme\n      } = userStore.userExtraData;\n      setTheme(theme);\n    }\n  }, [userStore.userExtraData]);\n  const listenUploadEnd = async res => {\n    var _pages$length;\n    const lastUploadTime = await getInkManager().getLastSyncUploadTime();\n    const pages = await NDP.instance.inkStore.getStrokeByUpload(lastUploadTime, res.createdDate + 1000 // 업로드되는데 시간이 걸려서 1000ms 더해줘야함\n    );\n\n    const ln = (_pages$length = pages === null || pages === void 0 ? void 0 : pages.length) !== null && _pages$length !== void 0 ? _pages$length : 0;\n    if (ln) {\n      let needToBeReplaced = false;\n      let dummyNoteId = '';\n      let dummyPageId = '';\n      let dummySobp = {};\n\n      // eslint-disable-next-line no-restricted-syntax\n      for (const page of pages) {\n        const targetNote = noteStore.noteList.find(e => e.id === page.noteUUID);\n        if (targetNote) {\n          const targetPage = pageStore.allPageList[targetNote.id].find(e => e.id === page.pageUUID);\n          if (targetPage) {\n            //페이지도 있다? 그럼 할 거 없음\n            break;\n          } else {\n            //노트는 있는데 페이지는 없는 경우\n            //더미로 들어가있다는 뜻. PageStore에서 sobp랑 dummy로 찾아\n            const dummyPage = pageStore.allPageList[targetNote.id].find(e => {\n              if (e.section === page.section && e.owner === page.owner && e.bookCode === page.bookCode && e.dummy) {\n                return true;\n              }\n              return false;\n            });\n            if (dummyPage !== undefined) {\n              dummyPageId = dummyPage.id;\n              dummyPage.dummy = false;\n              dummyPage.id = page.pageUUID;\n              dummyPage.noteId = page.noteUUID;\n            }\n            needToBeReplaced = true;\n            dummySobp = {\n              section: dummyPage.section,\n              owner: dummyPage.owner,\n              book: dummyPage.bookCode,\n              page: dummyPage.pageNumber,\n              pageUuid: dummyPageId,\n              noteUuid: targetNote.id\n            };\n          }\n        } else {\n          //노트도 처음 생성하는 경우. 현재는 더미 노트로 존재\n          const dummyNote = noteStore.noteList.find(e => {\n            if (e.section === page.section && e.owner === page.owner && e.bookCode === page.bookCode && e.dummy) {\n              return true;\n            }\n            return false;\n          });\n          if (dummyNote !== undefined) {\n            dummyNoteId = dummyNote.id;\n            dummyNote.dummy = false;\n            pageStore.allPageList[page.noteUUID] = [];\n            pageStore.allPageList[page.noteUUID] = pageStore.allPageList[dummyNote.id];\n            delete pageStore.allPageList[dummyNote.id];\n            dummyNote.id = page.noteUUID;\n          }\n          const dummyPage = pageStore.allPageList[page.noteUUID].find(e => {\n            if (e.section === page.section && e.owner === page.owner && e.bookCode === page.bookCode && e.dummy) {\n              return true;\n            }\n            return false;\n          });\n          if (dummyPage !== undefined) {\n            dummyPageId = dummyPage.id;\n            dummyPage.dummy = false;\n            dummyPage.id = page.pageUUID;\n            dummyPage.noteId = page.noteUUID;\n          }\n          needToBeReplaced = true;\n          dummySobp = {\n            section: dummyPage.section,\n            owner: dummyPage.owner,\n            book: dummyPage.bookCode,\n            page: dummyPage.pageNumber,\n            pageUuid: dummyPageId,\n            noteUuid: dummyNoteId\n          };\n        }\n        const dummySobpId = makeNPageIdStrWithUuid(dummySobp);\n        const strokesOnDummyPage = CachedInkStorage.instance.completedOnPage.get(dummySobpId);\n        if (strokesOnDummyPage.arr.array) {\n          for (const stroke of strokesOnDummyPage.arr.array) {\n            stroke.pageUuid = page.pageUUID;\n            stroke.noteUuid = page.noteUUID;\n          }\n          const realSobpId = makeNPageIdStrWithUuid({\n            section: page.section,\n            owner: page.owner,\n            book: page.bookCode,\n            page: page.pageNumber,\n            pageUuid: page.pageUUID,\n            noteUuid: page.noteUUID\n          });\n          CachedInkStorage.instance.completedOnPage.set(realSobpId, strokesOnDummyPage);\n          CachedInkStorage.instance.completedOnPage.delete(dummySobpId);\n        }\n      }\n      const thumbManager = getThumbManager();\n      for (let i = 0; i < ln; i++) {\n        const pr = thumbManager.invalidateIfNeeded({\n          noteId: pages[i].noteUUID,\n          pageId: pages[i].pageUUID,\n          strokeLastUploadTime: res.createdDate,\n          doNotNotify: false,\n          force: true,\n          needToBeReplaced\n        });\n        await pr;\n      }\n    }\n  };\n  return (\n    /*#__PURE__*/\n    // 임시조치\n    _jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/signIn\",\n        element: /*#__PURE__*/_jsxDEV(SignIn, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 38\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: NDP_LOGIN_CALLBACK_PATH,\n        element: /*#__PURE__*/_jsxDEV(UserAuthReactElement, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 18\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"*\",\n        element: /*#__PURE__*/_jsxDEV(SignIn, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 32\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 5\n    }, this)\n  );\n};\n_s(App, \"FvAGz+HO1PA7l+ijHhgd8txg5WY=\", true);\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","Route","Routes","jsxDEV","_jsxDEV","App","_s","isMobileDevice","location","useLocation","console","log","userStore","pageStore","noteStore","strokeStore","audioStore","useStores","extra","userExtraData","theme","setTheme","useState","connectLiveRoom","ndp","NDP","instance","relay","rooms","getRoom","_rooms$resultElements","existed","resultElements","filter","e","ownerId","userData","id","length","setRoom","room","createRoom","entranceUrl","error","connectRoom","relayWS","join","on","listenUploadEnd","useEffect","NDPSyncController","getInstance","PenManager","DatabaseController","window","scrollTo","getUserStrokes","getNoteList","loadLocalNoteList","loadLocalPages","setStrokeLoading","LoadingStateEnum","SUCCESS","getRecordedPageList","res","_pages$length","lastUploadTime","getInkManager","getLastSyncUploadTime","pages","inkStore","getStrokeByUpload","createdDate","ln","needToBeReplaced","dummyNoteId","dummyPageId","dummySobp","page","targetNote","noteList","find","noteUUID","targetPage","allPageList","pageUUID","dummyPage","section","owner","bookCode","dummy","undefined","noteId","book","pageNumber","pageUuid","noteUuid","dummyNote","dummySobpId","makeNPageIdStrWithUuid","strokesOnDummyPage","CachedInkStorage","completedOnPage","get","arr","array","stroke","realSobpId","set","delete","thumbManager","getThumbManager","i","pr","invalidateIfNeeded","pageId","strokeLastUploadTime","doNotNotify","force","children","path","element","SignIn","fileName","_jsxFileName","lineNumber","columnNumber","NDP_LOGIN_CALLBACK_PATH","UserAuthReactElement","_c","$RefreshReg$"],"sources":["/Users/seowoo/Desktop/neo_test/wifiapp/src/App.tsx"],"sourcesContent":["import React from 'react';\nimport { Route, Routes } from 'react-router-dom';\n/* import * as ROUTES from './routes'; */\n\nimport LogIn from './views/LogIn/LoginForm';\n\nimport './App.css';\n\nconst App = () => {\n  // const [theme, settheme] = useState(neolabTheme.theme0_kr);\n  const isMobileDevice = true;\n  const location = useLocation();\n  console.log(location);\n\n  const { userStore, pageStore, noteStore, strokeStore, audioStore } =\n    useStores();\n  const extra = userStore.userExtraData;\n  const [theme, setTheme] = useState(extra.theme); // 테마\n\n  const connectLiveRoom = async () => {\n    const ndp = NDP.instance;\n    const { relay } = ndp;\n\n    const rooms = await relay.getRoom();\n\n    if (rooms) {\n      const existed = rooms?.resultElements?.filter(\n        (e) => e.ownerId === userStore.userData.id,\n      );\n\n      if (existed.length) {\n        relay.setRoom(existed[0]);\n      } else {\n        const room = await relay.createRoom();\n        if (room.entranceUrl) {\n          relay.setRoom(room);\n        } else {\n          console.error('Create Room Failed. Please check the server status.');\n          return;\n        }\n      }\n      await relay.connectRoom();\n\n      await relay.relayWS.join();\n\n      NDP.instance.relay.relayWS.on('UPLOAD_END', listenUploadEnd);\n    }\n  };\n\n  useEffect(() => {\n    NDPSyncController.getInstance();\n    PenManager.getInstance();\n    DatabaseController.getInstance();\n\n    // const ti = getThumbManager(); //여기서 init 해주지 않으면 ready가 pending이어서 진행되지 않음\n  }, []);\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [location]);\n\n  useEffect(() => {\n    async function getUserStrokes() {\n      // const asyncIterableStroke = NDP.instance.inkStore.getStrokeByStrokeIter(0);\n      // for await (const pages of asyncIterableStroke) {\n      //   NDPSyncController.instance.updateInkStoreage(pages);\n      // }\n    }\n\n    async function getNoteList() {\n      await noteStore.loadLocalNoteList();\n      await pageStore.loadLocalPages();\n      strokeStore.setStrokeLoading(LoadingStateEnum.SUCCESS);\n    }\n\n    if (userStore.userData) {\n      getNoteList();\n      getUserStrokes();\n      connectLiveRoom();\n      audioStore.getRecordedPageList();\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userStore.userData]);\n\n  // 사용자 테마 세팅\n  useEffect(() => {\n    if (userStore.userExtraData) {\n      const { theme } = userStore.userExtraData;\n      setTheme(theme);\n    }\n  }, [userStore.userExtraData]);\n\n  const listenUploadEnd = async (res) => {\n    const lastUploadTime = await getInkManager().getLastSyncUploadTime();\n    const pages = (await NDP.instance.inkStore.getStrokeByUpload(\n      lastUploadTime,\n      res.createdDate + 1000, // 업로드되는데 시간이 걸려서 1000ms 더해줘야함\n    )) as NDPInkStorePage[];\n    const ln = pages?.length ?? 0;\n\n    if (ln) {\n      let needToBeReplaced = false;\n      let dummyNoteId = '';\n      let dummyPageId = '';\n      let dummySobp: any = {};\n\n      // eslint-disable-next-line no-restricted-syntax\n      for (const page of pages) {\n        const targetNote = noteStore.noteList.find(\n          (e) => e.id === page.noteUUID,\n        );\n\n        if (targetNote) {\n          const targetPage = pageStore.allPageList[targetNote.id].find(\n            (e) => e.id === page.pageUUID,\n          );\n\n          if (targetPage) {\n            //페이지도 있다? 그럼 할 거 없음\n            break;\n          } else {\n            //노트는 있는데 페이지는 없는 경우\n            //더미로 들어가있다는 뜻. PageStore에서 sobp랑 dummy로 찾아\n            const dummyPage = pageStore.allPageList[targetNote.id].find((e) => {\n              if (\n                e.section === page.section &&\n                e.owner === page.owner &&\n                e.bookCode === page.bookCode &&\n                e.dummy\n              ) {\n                return true;\n              }\n              return false;\n            });\n\n            if (dummyPage !== undefined) {\n              dummyPageId = dummyPage.id;\n              dummyPage.dummy = false;\n              dummyPage.id = page.pageUUID;\n              dummyPage.noteId = page.noteUUID;\n            }\n\n            needToBeReplaced = true;\n\n            dummySobp = {\n              section: dummyPage.section,\n              owner: dummyPage.owner,\n              book: dummyPage.bookCode,\n              page: dummyPage.pageNumber,\n              pageUuid: dummyPageId,\n              noteUuid: targetNote.id,\n            };\n          }\n        } else {\n          //노트도 처음 생성하는 경우. 현재는 더미 노트로 존재\n          const dummyNote = noteStore.noteList.find((e) => {\n            if (\n              e.section === page.section &&\n              e.owner === page.owner &&\n              e.bookCode === page.bookCode &&\n              e.dummy\n            ) {\n              return true;\n            }\n            return false;\n          });\n\n          if (dummyNote !== undefined) {\n            dummyNoteId = dummyNote.id;\n            dummyNote.dummy = false;\n\n            pageStore.allPageList[page.noteUUID] = [];\n            pageStore.allPageList[page.noteUUID] =\n              pageStore.allPageList[dummyNote.id];\n\n            delete pageStore.allPageList[dummyNote.id];\n\n            dummyNote.id = page.noteUUID;\n          }\n\n          const dummyPage = pageStore.allPageList[page.noteUUID].find((e) => {\n            if (\n              e.section === page.section &&\n              e.owner === page.owner &&\n              e.bookCode === page.bookCode &&\n              e.dummy\n            ) {\n              return true;\n            }\n            return false;\n          });\n\n          if (dummyPage !== undefined) {\n            dummyPageId = dummyPage.id;\n            dummyPage.dummy = false;\n            dummyPage.id = page.pageUUID;\n            dummyPage.noteId = page.noteUUID;\n          }\n\n          needToBeReplaced = true;\n          dummySobp = {\n            section: dummyPage.section,\n            owner: dummyPage.owner,\n            book: dummyPage.bookCode,\n            page: dummyPage.pageNumber,\n            pageUuid: dummyPageId,\n            noteUuid: dummyNoteId,\n          };\n        }\n\n        const dummySobpId = makeNPageIdStrWithUuid(dummySobp);\n        const strokesOnDummyPage =\n          CachedInkStorage.instance.completedOnPage.get(dummySobpId);\n        if (strokesOnDummyPage.arr.array) {\n          for (const stroke of strokesOnDummyPage.arr.array) {\n            stroke.pageUuid = page.pageUUID;\n            stroke.noteUuid = page.noteUUID;\n          }\n\n          const realSobpId = makeNPageIdStrWithUuid({\n            section: page.section,\n            owner: page.owner,\n            book: page.bookCode,\n            page: page.pageNumber,\n            pageUuid: page.pageUUID,\n            noteUuid: page.noteUUID,\n          });\n\n          CachedInkStorage.instance.completedOnPage.set(\n            realSobpId,\n            strokesOnDummyPage,\n          );\n          CachedInkStorage.instance.completedOnPage.delete(dummySobpId);\n        }\n      }\n\n      const thumbManager = getThumbManager();\n      for (let i = 0; i < ln; i++) {\n        const pr = thumbManager.invalidateIfNeeded({\n          noteId: pages[i].noteUUID,\n          pageId: pages[i].pageUUID,\n          strokeLastUploadTime: res.createdDate,\n          doNotNotify: false,\n          force: true,\n          needToBeReplaced,\n        });\n        await pr;\n      }\n    }\n  };\n\n  return (\n    // 임시조치\n    <Routes>\n      {/* Public route */}\n      <Route path=\"/signIn\" element={<SignIn />} />\n      <Route\n        path={NDP_LOGIN_CALLBACK_PATH}\n        element={<UserAuthReactElement />}\n      />\n      <Route path=\"*\" element={<SignIn />} />\n    </Routes>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}